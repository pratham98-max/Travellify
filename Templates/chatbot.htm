{% extends "layout.htm" %}
{% block content %}
<h2 class="text-center mb-3">TravelEase AI ChatBot ðŸ¤–</h2>

<div id="chatBox" style="height:360px; overflow-y:auto; padding:10px; background:rgba(255,255,255,0.15); border-radius:10px;"></div>

<div class="input-group mt-3">
    <input id="msgInput" class="form-control" placeholder="Ask something...">
    <button class="btn btn-main" id="sendBtn">Send</button>
</div>

<script>
const box = document.getElementById("chatBox");
const input = document.getElementById("msgInput");
const btn = document.getElementById("sendBtn");

function add(role, text){
  box.innerHTML += `<p><b>${role}:</b> ${text}</p>`;
  box.scrollTop = box.scrollHeight;
}

btn.onclick = async () => {
  let msg = input.value.trim();
  if(!msg) return;
  add("You", msg);
  input.value="";

  let res = await fetch("/chatbot_api", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({message:msg})
  });
  let data = await res.json();
  add("AI", data.reply);
};
</script>
{% endblock %}
