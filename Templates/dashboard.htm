{% extends 'layout.htm' %}
{% block content %}
<h3 class="text-center mb-4">üìä Admin Dashboard</h3>

<div class="row">
    <!-- BOOKINGS -->
    <div class="col-md-7">
        <div class="card p-3 shadow-sm mb-4">
            <h5 class="text-primary">All Bookings</h5>

            {% if bookings %}
            <table class="table table-striped table-hover align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>User</th>
                        <th>Hotel</th>
                        <th>Check-in</th>
                        <th>Check-out</th>
                        <th>Price</th>
                        <th>Payment</th>
                    </tr>
                </thead>
                <tbody>
                    {% for b in bookings %}
                    <tr>
                        <td>{{ b.name }}</td>
                        <td>{{ b.hotel }}</td>
                        <td>{{ b.checkin }}</td>
                        <td>{{ b.checkout }}</td>
                        <td>‚Çπ{{ b.total_price }} {% if b.nights %}<span class="text-muted">({{ b.nights }} night{{ 's' if b.nights>1 else '' }})</span>{% endif %}

</td>

                        <td>
                            {% if b.paid %}
                                <span class="badge bg-success">Paid ‚úÖ</span>
                                {% if b.txn_id %}
                                <a href="{{ url_for('download_receipt', txn_id=b.txn_id) }}" class="btn btn-sm btn-outline-secondary ms-2">
                                    üßæ Receipt
                                </a>
                                {% endif %}
                            {% else %}
                                <a href="{{ url_for('payment', booking_id=b._id) }}" class="btn btn-sm btn-success">
                                    üí≥ Pay Now
                                </a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="text-muted">No bookings yet.</p>
            {% endif %}
        </div>
    </div>

    <!-- REVIEWS -->
    <div class="col-md-5">
        <div class="card p-3 shadow-sm mb-4">
            <h5 class="text-success">All Reviews</h5>

            {% if reviews %}
            <table class="table table-bordered table-hover align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Hotel</th>
                        <th>Rating</th>
                        <th>Comment</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in reviews %}
                    <tr>
                        <td>{{ r.hotel }}</td>
                        <td>{{ r.rating }} ‚≠ê</td>
                        <td>{{ r.comment }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="text-muted">No reviews yet.</p>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}
