{% extends "layout.htm" %}
{% block content %}

<div class="container mt-4">

    <div class="card shadow p-4 mb-4">
        <h3 class="fw-bold">üë§ Profile Details</h3>
        <p><strong>Name:</strong> {{ user.username }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Role:</strong> {{ user.role|capitalize }}</p>
    </div>

    <div class="card shadow p-4 mb-4">
        <h4 class="fw-bold">üè® Your Bookings</h4>
        {% if bookings %}
        <table class="table table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Hotel</th>
                    <th>Check-in</th>
                    <th>Check-out</th>
                    <th>Price</th>
                    <th>Payment</th>
                </tr>
            </thead>
            <tbody>
                {% for b in bookings %}
                <tr>
                    <td>{{ b.hotel }}</td>
                    <td>{{ b.checkin }}</td>
                    <td>{{ b.checkout }}</td>
                    <td>‚Çπ{{ b.price }}</td>
                    <td>
                        {% if b.paid %}
                        ‚úÖ Paid | <a href="{{ url_for('download_receipt', txn_id=b.txn_id) }}">Download Receipt</a>
                        {% else %}
                        <a href="{{ url_for('payment', booking_id=b._id) }}" class="btn btn-sm btn-success">Pay Now</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>You have no bookings yet.</p>
        {% endif %}
    </div>

    <div class="card shadow p-4 mb-4">
        <h4 class="fw-bold">‚≠ê Your Reviews</h4>
        {% if reviews %}
        <ul class="list-group">
        {% for r in reviews %}
            <li class="list-group-item">
                <strong>{{ r.hotel }}</strong> ‚Äî Rated {{ r.rating }}‚≠ê <br>
                "{{ r.comment }}"
            </li>
        {% endfor %}
        </ul>
        {% else %}
        <p>You haven't written any reviews yet.</p>
        {% endif %}
    </div>

</div>

{% endblock %}
